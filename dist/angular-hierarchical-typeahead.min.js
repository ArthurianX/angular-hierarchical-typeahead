"use strict";angular.module("keyboard.focus",[]),angular.module("keyboard",["keyboard.focus"]),angular.module("keyboard").constant("undefined"),angular.module("keyboard").factory("KbContainerController",["undefined","$log",function(a,b){function c(b){this.identifier="[kb-container]",this.ngModel=a,this.selected=[],this.multiple=!1,this.cyclic=!1,this.active=a,this._element=b[0]}return c.$inject=["$element"],angular.extend(c.prototype,{initialize:function(a){this.multiple=angular.isDefined(a.attrs.multiple),this.cyclic=angular.isDefined(a.attrs.kbCyclic),angular.extend(this,a),this.ngModel&&(this.ngModel.$render=function(){this.multiple?(this.selected=this.ngModel.$viewValue,angular.isArray(this.selected)===!1&&(angular.isDefined(this.selected)&&b.error(this.identifier,"ng-model(multiple) must be an array, got:",this.selected),this.selected=[])):this.selected[0]=this.ngModel.$viewValue;for(var a in this.selected){var c=this._locate(this.selected[a]);if(c){this.active=c;break}}}.bind(this))},select:function(a){this.ngModel&&(this.multiple?this.isSelected(a)===!1&&(this.selected.push(a),this.ngModel.$setViewValue(this.selected)):(this.selected[0]=a,this.ngModel.$setViewValue(a)))},deselect:function(b){if(this.ngModel){var c=this.selected.indexOf(b);-1!==c&&(this.selected.splice(c,1),this.multiple?this.ngModel.$setViewValue(this.selected):this.ngModel.$setViewValue(a))}},toggle:function(a){this.isSelected(a)?this.deselect(a):this.select(a)},isSelected:function(a){return-1!==this.selected.indexOf(a)},previous:function(){var a=this._getSiblingItems(this.active).previous;return!!a&&(this.active=a,!0)},next:function d(){var d=this._getSiblingItems(this.active).next;return!!d&&(this.active=d,!0)},activate:function(a,c){return b.$error(this.identifier,"activate() is not implemented"),!1},invoke:function(a){return b.$error(this.identifier,"invoke() is not implemented"),!1},_locate:function(a){for(var b=this._element.querySelectorAll("[kb-item]"),c=0;c<b.length;c++){var d=angular.element(b.item(c)).controller("kbItem");if(d.model===a)return d}},_getSiblingItems:function(a){for(var b=a.element[0],c=this._element.querySelectorAll("[kb-item]"),d=0;d<c.length;d++){var e=c.item(d);if(e===b){var f={};return 0!==d&&(f.previous=angular.element(c.item(d-1)).controller("kbItem")),d<c.length-1&&(f.next=angular.element(c.item(d+1)).controller("kbItem")),f}}return{}},_first:function(){var a=this._element.querySelector("[kb-item]");return a?angular.element(a).controller("kbItem"):void 0},_last:function(){var a=this._element.querySelectorAll("[kb-item]");return a.length?angular.element(a[a.length-1]).controller("kbItem"):void 0}}),c}]),angular.module("keyboard").factory("KbItemController",["kbScroll","undefined",function(a,b){function c(a){this.model=b,this.element=a}return c.$inject=["$element"],c}]),angular.module("keyboard.focus").directive("kbFocus",["kbFocus","$log",function(a,b){return function(a,b,c){a.$watch(c.kbAutofocus,function(a){b.prop("autofocus",!!a)})}}]),angular.module("keyboard.focus").directive("kbFocus",["kbFocus","$log",function(a,b){return function(c,d,e){c.$watch(a.get,function(a){a===e.kbFocus&&(""===a?b.error("[kb-focus] Invalid label in",d[0]):(d[0].focus(),document.activeElement!==d[0]&&setTimeout(function(){d[0].focus()})))}),d.on("focus",function(){a(e.kbFocus),c.$root.$$phase||c.$apply()}),d.on("blur",function(){a.get()===e.kbFocus&&(a.reset(),c.$root.$$phase||c.$apply())})}}]),angular.module("keyboard").directive("kbItem",["KbItemController","$animate","$log",function(a,b,c){return{controller:a,require:["kbItem","?^kbList","?^kbSelect"],link:function(a,d,e,f){function g(a,b,c){return"left"===a&&c.left<b.left?b.left-c.left:"up"===a&&c.top<b.top?b.top-c.top:"right"===a&&c.left>b.left?c.left-b.left:"down"===a&&c.top>b.top?c.top-b.top:0}for(var h=f[0],i=f[1],j="A"===d[0].tagName||"BUTTON"===d[0].tagName||"AREA"===d[0].tagName,k=1;k<f.length;k++)f[k]&&(i=f[k]);if(!i)return void c.error("Controller 'kbList' or 'kbSelect', required by directive 'kbItem', can't be found!");var l=e.kbSelectedClass||"kb-selected",m=e.kbActiveClass||"kb-active";h.model=a.$eval(e.kbItem),a.$watch(e.kbItem,function(a){h.model=a}),"undefined"==typeof i.active?i.active=h:i.isSelected(h.model)&&i.isSelected(i.active.model)===!1&&(i.active=h),a.$watch(function(){return i.isSelected(h.model)},function(a){a?b.addClass(d,l):b.removeClass(d,l)}),a.$watch(function(){return i.active===h},function(a){a?(d.attr("tabindex",0),b.addClass(d,m)):(b.removeClass(d,m),j?d.attr("tabindex",-1):d.removeAttr("tabindex"))});var n={37:"left",38:"up",39:"right",40:"down"};d.on("keydown",function(b){var c=!1,f=!1;if(b.which>=37&&b.which<=40){var j=i._getSiblingItems(h),k=d[0].getBoundingClientRect();if(j.previous&&g(n[b.which],k,j.previous.element[0].getBoundingClientRect())&&(i.activate(j.previous),c=!0),j.next&&g(n[b.which],k,j.next.element[0].getBoundingClientRect())&&(i.activate(j.next),c=!0),!(c!==!1||j.next&&j.previous)){var l=b.which,m=!1;b.which<=38?l+=2:l-=2,j.next&&g(n[l],k,j.next.element[0].getBoundingClientRect())&&(i.cyclic?(i.activate(i._last()),c=!0):m="kbReachedBegin"),j.previous&&g(n[l],k,j.previous.element[0].getBoundingClientRect())&&(i.cyclic?(i.activate(i._first()),c=!0):m="kbReachedEnd"),m&&i.attrs[m]&&angular.element(i._element).scope().$eval(i.attrs[m],{$event:b})}c&&b.preventDefault()}else 32===b.which?(b.preventDefault(),f=!0):13===b.which&&(f=!0);(c||f)&&(f&&(i.invoke(h),e.kbInvoke&&a.$eval(e.kbInvoke,{$event:b})),a.$apply())}),d.on("click",function(b){i.activate(h),i.invoke(h),e.kbInvoke&&a.$eval(e.kbInvoke,{$event:b}),a.$apply()}),a.$on("$destroy",function(){i.active=i._first()})}}}]),angular.module("keyboard").directive("kbList",["KbContainerController","kbScroll",function(a,b){return{controller:a,require:["kbList","?ngModel"],link:function(a,c,d,e){var f=e[0];f.initialize({identifier:"[kb-list]",ngModel:e[1],attrs:d,activate:function(a){this.active=a,this.select(a.model),b.focus(a.element[0])},invoke:function(){return!1}})}}}]),angular.module("keyboard").directive("kbSelect",["KbContainerController","kbScroll",function(a,b){return{controller:a,require:["kbSelect","ngModel"],link:function(a,c,d,e){var f=e[0];f.initialize({identifier:"[kb-select]",ngModel:e[1],attrs:d,activate:function(a){this.active=a,b.focus(a.element[0])},invoke:function(a){return this.toggle(a.model),!0}})}}}]),angular.module("keyboard.focus").factory("kbFocus",["$log",function(a){var b="",c=function d(a){return 0===arguments.length?b:void d.set(a)};return c.get=function(){return b},c.set=function(c){"string"==typeof c?b=c:a.error("[kbFocus] label must be a string, got",c)},c.reset=function(){b=""},c}]),angular.module("keyboard").service("kbScroll",["$window",function(a){var b="BODY";navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&(b="HTML");var c=this;this.change=function(a,b,c,d){if(d&&angular.element.prototype.animate){var e=angular.element(a),f={};return f[b]=c,e.animate(f,d),function(){e.stop(!0,!0)}}return a[b]=c,angular.noop},this.getScrollParent=function(a){for(var c=a.parentElement;c.nodeName!==b;){var d=getComputedStyle(c),e=d.overflow+d.overflowX+d.overflowY;if(e.match(/scroll|hidden/))break;c=c.parentElement}return c},this.to=function(d,e,f){var g=angular.noop,h=c.getScrollParent(d),i=d.getBoundingClientRect(),j={top:Math.ceil(i.top),right:Math.ceil(i.right),bottom:Math.ceil(i.bottom),left:Math.ceil(i.left)};if(h.nodeName===b)var k={top:0,right:a.innerWidth,bottom:a.innerHeight,left:0};else var l=h.getBoundingClientRect(),k={top:Math.ceil(l.top),right:Math.ceil(l.right),bottom:Math.ceil(l.bottom),left:Math.ceil(l.left)};var m=j.top-k.top,n=k.right-j.right,o=k.bottom-j.bottom,p=j.left-k.left;if(m+e.top<0?(g=c.change(h,"scrollTop",h.scrollTop+m+e.top,f),o+=m,m=0):o+e.bottom<0&&(g=c.change(h,"scrollTop",h.scrollTop-o+e.bottom,f),m+=o,o=0),p+e.left<0?(g=c.change(h,"scrollLeft",h.scrollLeft+p+e.left,f),n+=p,p=0):n+e.right<0&&(g=c.change(h,"scrollLeft",h.scrollLeft-n+e.right,f),p+=n,n=0),h.nodeName===b)return g;var q=c.to(h,{top:m,right:m,bottom:o,left:p},f);return function(){g(),q()}};var d=angular.noop;this.focus=function(a){d();var b=this.getScrollParent(a),c={top:b.scrollTop,left:b.scrollLeft};a.hasAttribute("tabindex")||a.setAttribute("tabindex",0),a.focus(),b.scrollTop===c.top&&b.scrollLeft===c.left||(b.scrollTop=c.top,b.scrollLeft=c.left,d=this.to(a,{top:0,right:0,bottom:0,left:0},200))}}]),angular.module("artTypeahead",["keyboard"]),angular.module("artTypeahead").factory("artTypeExternal",function(){return{}}).directive("artTypeahead",["$parse","$document","$http","$timeout","$window","$compile","artTypeExternal","filterFilter",function(a,b,c,d,e,f,g,h){return{restrict:"E",scope:{levels:"=artLevels",callOutside:"&artTrigger",source:"=artSource",pagination:"@artPagination",minQuery:"@artMinQuery",maxResults:"@artMaxResults",callSize:"@artCallSize",i18n:"=artTranslations",allData:"@artDisplayAll",mappings:"=artLevelsMap",disableExtSearch:"=artLocalFilter",sSearchKeys:"@artLocalFilterFields"},transclude:!1,templateUrl:"angular-hierarchical-typeahead.html",controller:function(a,b,c,d,e){if(a.loading=!1,a.query=null,a.lastLevel=!1,a.addedElements=!1,a.elementsAdded=0,a.tooMany=!1,a.activeLevel=0,a.showTooltip=!1,a.loadMore=!0,a.sSearchKeys&&(a.searchKeys=a.sSearchKeys.split(",")),a.disableExtSearch)try{angular.isUndefined(Fuse)}catch(f){console.warn("Please add the Fuse.js library to the project to enable local searching https://github.com/krisk/Fuse"),window.Fuse=!0}var g=0,h=[],i=[],j={maxResults:200,dblClickTime:400,minQuery:2,callSize:25,translations:{SEARCH_FOR:"Search for",LOAD_MORE:"Load More",NO_RESULTS:"No results.",TOO_MANY_RESULTS:"Too many results, please use the search function",HELP_ACTION:"Action",HELP_DESCRIPTION:"Description",HELP_CLICK:"Click",HELP_SPACE:"Space",HELP_ENTER:"Enter",HELP_BACKSPACE:"Backspace",HELP_DOUBLE_CLICK:"Double Click",HELP_ANY_KEY:"Any key",HELP_ARROWS_TEXT:"Move up and down on the list with keyboard arrows",HELP_LOAD:"Load the",HELP_VIEW:"into view",HELP_OPEN:"Open the",HELP_LEVEL:"in a new level",HELP_LEVEL2:"on a level",HELP_GO_BACK:"Go back one level",HELP_GO_BACK_CLICKED:"Go back to the selected level",HELP_ANY_KEY_PART1:"While on the",HELP_ANY_KEY_PART2:"list any key you press will focus the search input and make a new search."}};a.currentPlaceholder=a.levels[0].name,a.minQuery&&(j.minQuery=parseInt(a.minQuery)),a.maxResults&&(j.maxResults=parseInt(a.maxResults)),a.i18n?(a.translations=j.translations,angular.extend(a.translations,a.i18n)):a.translations=j.translations,g=a.callSize?parseInt(a.callSize):j.callSize;var k=function(a){if(i.length>0){for(var b=i.length,c={},d=0;b>d;d++)i[d].id===a&&(c=i[d]);return c}};a.whichLevel=function(){var b=a.levelsActive.length-1;return a.showTooltip=!1,a.levelsActive.forEach(function(a,c){a.isVisible&&!a.activeName&&(b=c)}),a.activeLevel=b,b};var l=function(a,b){for(var c=[],d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=a.map(function(a,b){if(angular.isFunction(a.value)){if("number"==typeof d){var c=d;d=[],d.push(c),d.push(b)}else d.length>1?d.push(b):d=b;return!1}return a.color&&(e=b,f=a.value),a.icon&&(g=b,h=a.value),a.individualStyling&&(i=a.value),a.value}),k=0;k<b.length;k++){var l={};for(var m in b[k])j.indexOf(m)>-1&&(l[m]={value:b[k][m]});if(l.id=b[k].id,d&&"number"==typeof d)l.ZZZZZZZ={hasCallback:!0,callback:a[d].value,action:a[d].actionName,icon:a[d].actionIcon,color:a[d].actionColor};else if(d&&d.length>0)for(var n=0;n<d.length;n++)l["ZZZZZZZ"+n]={hasCallback:!0,callback:a[d[n]].value,action:a[d[n]].actionName,icon:a[d[n]].actionIcon,color:a[d[n]].actionColor};e&&(l[f].color=a[e].color),g&&(l[h].icon=a[g].icon),i&&(l[i].artCustom=b[k].custom),c.push(l)}return c};a.selectItem=function(b,c,d,e){var f=a.whichLevel();if(13===d.keyCode||e||"dblclick"===d.type)a.mappings&&a.mappings[a.activeLevel]?a.levelsActive[f].activeName=b.name?b.name.value:b[Object.keys(b)[0]].value:a.levelsActive[f].activeName=b.name||b[Object.keys(b)[0]],a.levelsActive[f+1]&&(a.levelsActive[f+1].activeId=b.id),a.levelsActive[f].isActive=!0,a.query=null,f<a.levelsActive.length-1?(a.levelsActive[f+1].isVisible=!0,a.currentPlaceholder=a.levels[f+1].name,m(!1),a.focusOnSearch()):parseInt(f)===a.levelsActive.length-1&&(a.lastLevel=!0,a.callOutside({id:b.id,type:a.levels[f].name,fullResponse:k(b.id)}));else if(32===d.keyCode||"click"===d.type)if(f<a.levelsActive.length-1)a.callOutside({id:b.id,type:a.levels[f].name,fullResponse:k(b.id)});else if(parseInt(f)===a.levelsActive.length-1){if(a.callOutside({id:b.id,type:a.levels[f].name,fullResponse:k(b.id)}),a.lastLevel=!0,a.query=null,!a.results||a.results.length<1)return!1;var g=[];if(a.mappings&&a.mappings[a.activeLevel]){if(g=a.results.map(function(a){return a.name?a.name.value:a[Object.keys(a)[0]].value}),g.indexOf(b.name?b.name.value:b[Object.keys(b)[0]].value)<0)return!1}else if(g=a.results.map(function(a){return a.name||a[Object.keys(a)[0]]}),g.indexOf(b.name||b[Object.keys(b)[0]])<0)return!1;a.mappings&&a.mappings[a.activeLevel]?a.levelsActive[f].activeName=b.name?b.name.value:b[Object.keys(b)[0]].value:a.levelsActive[f].activeName=b.name||b[Object.keys(b)[0]],a.levelsActive[f+1]&&(a.levelsActive[f+1].activeId=b.id),a.levelsActive[f].isActive=!0}},a.actionLevel=function(b,c,d){if(!b.activeName&&!d)return!1;var e=a.whichLevel();if(e>c)for(var f=c;f<a.levelsActive.length;f++)a.levelsActive[f].activeName=!1,a.levelsActive[f].isActive=!1,a.levelsActive[f].isVisible=!1;b.activeName=!1,b.isActive=!0,b.isVisible=!0,a.lastLevel=!1,a.currentPlaceholder=b.name,m(!1),a.focusOnSearch(),d&&a.$apply()};var m=function(c,d){if(a.loading=!0,c&&a.disableExtSearch&&Fuse){var f=JSON.parse(JSON.stringify(a.results));if(a.results=!1,angular.isFunction(Fuse)){var m=new Fuse(a.originalResults,{shouldSort:!0,threshold:.6,location:0,distance:200,maxPatternLength:32,keys:a.searchKeys}),n=[];m.search(c).map(function(a){n.push(a.id)}),a.results=[],f.filter(function(b){n.indexOf(b.id)>-1&&a.results.push(b)})}else a.results=e(f,a.query);return void(a.loading=!1)}d||(a.results=!1),a.loadMore=!0;var o=a.whichLevel();a.source(a.levels[o].name,c,d,a.levelsActive[o].activeId).then(function(c){a.tooMany=!1,c.length>0?d?(angular.equals(h,c)||(a.results=a.results.concat(c),a.addedElements=!0,a.elementsAdded=c.length,b(function(){a.addedElements=!1},700)),a.results.length>j.maxResults&&(a.tooMany=!0,a.results=!1)):(a.results=c,a.callOutside({id:c[0].id,type:a.levels[o].name,fullResponse:k(c[0].id)}),a.levels[o].dataSet=c):d||(a.results=!1),a.results&&(i=angular.copy(a.results)),a.results&&a.mappings&&a.mappings[a.activeLevel]&&(a.results=l(a.mappings[a.activeLevel],a.results)),a.loading=!1,a.results&&(a.results.length/g%1!==0||a.results.length<g)&&(a.loadMore=!1),h=c,a.$emit("ART:External:Ready"),(!a.results||void 0===a.results||a.results.length<1)&&a.callOutside({id:!1,type:a.levels[o].name,fullResponse:!1}),a.originalResults=JSON.parse(JSON.stringify(c))},function(b){a.results=!1,a.loading=!1})};a.getOutsideData=m,a.$watch("query",function(b){if(b&&b.length>j.minQuery){m(b);var c=a.whichLevel();a.levelsActive[c].activeName=!1}else(!b||b&&b.length<=j.minQuery)&&m(!1)}),a.hideInput=function(b){return b&&!a.query&&a.levelsActive.length>1?{flex:0,width:"0px",opacity:0}:{flex:1,width:"initial",opacity:1}},a.hideClearInput=function(b){return b&&!a.query&&a.levelsActive.length>1?{width:"0px",opacity:0}:{width:"initial",opacity:1}};var n=function(b){a.levelsActive=angular.copy(b),a.levelsActive=a.levelsActive.map(function(a){return{name:a.name,icon:a.icon,color:a.color,bColor:a.bColor,isActive:!1,isVisible:!1,activeName:!1,activeId:!1}}),a.levelsActive[0].isVisible=!0};n(a.levels),m(!1);var o=function(b){for(var c=-1,d=a.results.length<=g?a.results.length:g,e=0;d>e;e++)a.results[e].id===b&&(c=e);return c};d.goBackToLevel=function(b){a.actionLevel(a.levelsActive[b],b);var c=a.whichLevel();c===b&&m(!1)},d.pushLevelAndRefresh=function(c,d){if(n(c),a.currentPlaceholder=c[0].name,a.actionLevel(a.levelsActive[0],0),d&&d.id){m(!1);var e=a.$on("ART:External:Ready",function(){var c=o(d.id);a.allData?b(function(){a.selectSpecificItem(c+1)},250):b(function(){a.selectSpecificItem(c)},250),e()})}else m(!1)},d.goBackToItem=function(c){if(void 0!==c.level){a.actionLevel(a.levelsActive[c.level],c.level);var d=a.$on("ART:External:Ready",function(){var e=o(c.id);if(e>-1)a.allData?b(function(){a.selectSpecificItem(e+1)},250):b(function(){a.selectSpecificItem(e)},250);else{a.query=c.name;var f=a.$on("ART:External:Ready",function(){a.allData?b(function(){a.selectSpecificItem(1)},250):b(function(){a.selectSpecificItem(0)},250),f()})}d()})}else{var e=o(c.id);if(e>-1){m(!1);var f=a.$on("ART:External:Ready",function(){a.allData?b(function(){a.selectSpecificItem(e+1)},250):b(function(){a.selectSpecificItem(e)},250),f()})}else{a.query=c.name;var g=a.$on("ART:External:Ready",function(){a.allData?b(function(){a.selectSpecificItem(1)},250):b(function(){a.selectSpecificItem(0)},250),g()})}}},d.goForward=function(a){console.log(a)}},link:function(a,b,c){a.selectSpecificItem=function(c){a.allData?b[0].querySelectorAll(".art-results tr")[c].click():b[0].querySelectorAll(".art-results li")[c].click()},b[0].querySelector(".levels.search-bar").addEventListener("keydown",function(c){if(40===c.keyCode&&a.results&&(c.stopPropagation(),c.preventDefault(),a.allData?b[0].querySelectorAll(".art-results tr")[2].click():b[0].querySelectorAll(".art-results li")[1].click()),8===c.keyCode&&!a.query){var d=a.whichLevel();d>0&&a.actionLevel(a.levelsActive[d-1],d-1,!0)}if(13===c.keyCode&&a.results){var e=null;e=a.allData?parseInt(angular.element(b[0].querySelectorAll(".art-results tr"))[1].getAttribute("data-has-index")):parseInt(angular.element(b[0].querySelector(".art-results li.kb-active"))[0].getAttribute("data-has-index")),a.selectItem(a.results[e],e,{keyCode:13}),a.$apply()}},!1),a.focusOnSearch=function(a){a?a.keyCode&&13!==a.keyCode&&32!==a.keyCode&&38!==a.keyCode&&40!==a.keyCode&&b[0].querySelector(".search-bar").focus():b[0].querySelector(".search-bar").focus()};var f=function(b){b.stopPropagation(),b.preventDefault(),a.showTooltip&&(a.showTooltip=!1,document.querySelector(".art-tooltip-helper").scrollTop=0,d(function(){a.$apply()}))};a.openTooltip=function(b){a.showTooltip||(a.showTooltip=!0,angular.element(e).off("mousedown",f),angular.element(e).on("mousedown",f))}}}}]),angular.module("artTypeahead").run(["$templateCache",function(a){a.put("angular-hierarchical-typeahead.html",'<div class="art-typeahead-container">\n    <div class="art-search">\n        <div class="levels"\n             ng-repeat="level in levelsActive track by $index"\n             ng-if="level.isVisible"\n             ng-class="{active: level.isActive}"\n             ng-click="actionLevel(level, $index)"\n             style="background-color: {{level.bColor}}; border-color: {{level.bColor}}"\n        >\n            <i style="color: {{level.color}}" class="{{level.icon}}" aria-hidden="true"></i> {{level.activeName || level.name}}\n        </div>\n        <input ng-style="hideInput(lastLevel)" type="text" ng-model="query" ng-model-options="{ debounce: 500 }" class="levels search-bar" placeholder="{{translations.SEARCH_FOR}} {{currentPlaceholder}}" autofocus>\n        <a ng-style="hideClearInput(lastLevel)" href="javascript:;" class="art-clear-text" ng-click="query = \'\'"><i class="fa fa-times" aria-hidden="true"></i></a>\n    </div>\n    <div class="art-loader" ng-if="loading">\n        <svg class="art-circular" viewBox="25 25 50 50">\n            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/>\n        </svg>\n    </div>\n    <div style="text-align: right;" class="art-tooltip-helper" ng-class="{\'art-open\': showTooltip}">\n        <i class="fa fa-question-circle" aria-hidden="true" ng-click="openTooltip($event)"></i>\n        <small class="art-tooltip">\n            <table class="table table-bordered" style="width: 95%; float: right">\n                <thead>\n                <tr>\n                    <th>{{translations.HELP_ACTION}}</th>\n                    <th>{{translations.HELP_DESCRIPTION}}</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr>\n                    <td><i class="fa fa-arrow-down" aria-hidden="true"></i> & <i class="fa fa-arrow-up" aria-hidden="true"></i></td>\n                    <td valign="middle">{{translations.HELP_ARROWS_TEXT}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-mouse-pointer" aria-hidden="true"></i> {{translations.HELP_CLICK}}</td>\n                    <td rowspan="2" valign="middle">{{translations.HELP_LOAD}} {{currentPlaceholder}} {{translations.HELP_VIEW}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-keyboard-o" aria-hidden="true"></i> {{translations.HELP_SPACE}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-external-link-square" aria-hidden="true"></i> {{translations.HELP_CLICK}}</td>\n                    <td rowspan="2" valign="middle">{{translations.HELP_OPEN}} {{currentPlaceholder}} {{translations.HELP_LEVEL}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-keyboard-o" aria-hidden="true"></i> {{translations.HELP_ENTER}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-keyboard-o" aria-hidden="true"></i> {{translations.HELP_BACKSPACE}}</td>\n                    <td valign="middle">{{translations.HELP_GO_BACK}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-mouse-pointer" aria-hidden="true"></i> {{translations.HELP_CLICK}} {{translations.HELP_LEVEL2}}</td>\n                    <td valign="middle">{{translations.HELP_GO_BACK_CLICKED}}</td>\n                </tr>\n                <tr>\n                    <td><i class="fa fa-keyboard-o" aria-hidden="true"></i> {{translations.HELP_ANY_KEY}}</td>\n                    <td valign="middle">{{translations.HELP_ANY_KEY_PART1}} {{currentPlaceholder}} {{translations.HELP_ANY_KEY_PART2}}</td>\n                </tr>\n                </tbody>\n            </table>\n        </small>\n    </div>\n    <div class="art-results" ng-class="{\'art-loading\': loading, \'art-tooltip-open\': showTooltip}">\n        <ul kb-list ng-if="results">\n\n            <li ng-if="allData == \'false\'" ng-repeat="item in results track by $index" kb-item kb-invoke="selectItem(item, $index, $event)" data-has-index="{{$index}}" ng-keydown="focusOnSearch($event)" ng-dblclick="selectItem(item, $index, $event)">\n                {{item.name}}\n            </li>\n\n            <!-- Map all the existing properties into display if there\'s no mapping object for this level-->\n\n            <li class="art-no-height" ng-if="::allData == \'true\'">\n\n                <table class="table">\n                    <thead>\n                        <tr>\n                            <th ng-if="::!mappings[activeLevel] && key != \'id\'" ng-repeat="(key, value) in ::results[0]">{{key}}</th>\n                            <th ng-if="::mappings && mappings[activeLevel]" ng-repeat="heading in ::mappings[activeLevel]">\n                                {{heading.name}}\n                            </th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="item in results track by $index" kb-item kb-invoke="selectItem(item, $index, $event)" data-has-index="{{$index}}" ng-keydown="focusOnSearch($event)" ng-dblclick="selectItem(item, $index, $event)">\n                            <!-- THIS SECTION HAS ALL THE ELEMENTS BOUND ONLY ONCE -->\n                            <td ng-repeat="(key, value) in ::item" ng-if="::key != \'id\' && key != \'artCustom\'" valign="middle">\n\n                                <!-- IF is the name cell, show the load next level icon -->\n                                <span class="open-level" ng-if="::key == \'name\' && !lastLevel && levelsActive.length > 1" ng-click="selectItem(item, $index, $event, true)"><i class="fa fa-external-link-square" aria-hidden="true"></i></span>\n\n                                <!-- IF there\'s no callback involved, just show the text itself -->\n                                <span ng-if="::!item[key].hasCallback && mappings[activeLevel] && !item[key].artCustom" ng-style="{color: item[key].color}"> <i ng-if="::item[key].icon" class="{{::item[key].icon}}" aria-hidden="true"></i> {{::item[key].value}}</span>\n\n                                <span ng-if="::!item[key].hasCallback && mappings[activeLevel] && item[key].artCustom"> <i ng-if="::item[key].artCustom.icon" ng-style="{color: item[key].artCustom.color}" class="{{::item[key].artCustom.icon}}" aria-hidden="true"></i> {{::item[key].value}}</span>\n\n                                <span ng-if="::!item[key].hasCallback && !mappings[activeLevel]">{{item[key]}}</span>\n\n                                <!-- IF there\'s a callback involved, show a button with the action on it -->\n                                <span ng-if="::item[key].hasCallback">\n                                    <button class="art-inner-callback-button" ng-click="item[key].callback($event, item)" ng-style="{\'background-color\': item[key].color}">\n                                        <i ng-if="::item[key].icon" class="{{::item[key].icon}}" aria-hidden="true"></i>\n                                        <span ng-if="::item[key].action">{{::item[key].action}}</span>\n                                    </button>\n                                </span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </li>\n\n            <li ng-if="pagination && loadMore" class="load-more" ng-click="getOutsideData(false, true)">\n                <i class="fa fa-plus" aria-hidden="true"></i> {{translations.LOAD_MORE}}\n            </li>\n        </ul>\n        <ul>\n            <li ng-if="!results && !loading && !tooMany">\n                <i class="fa fa-ban" aria-hidden="true"></i> {{translations.NO_RESULTS}}\n            </li>\n\n            <li ng-if="!results && !loading && tooMany">\n                <i class="fa fa-ban" aria-hidden="true"></i> {{translations.TOO_MANY_RESULTS}}\n            </li>\n        </ul>\n    </div>\n    <div class="art-elements-added" ng-if="pagination && addedElements"> <!--&& addedElements-->\n        <i class="fa fa-plus" aria-hidden="true"></i>{{elementsAdded}}\n    </div>\n\n\n\n\n\n</div>')}]);